(()=>{"use strict";var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.prototype.slice.call(t.querySelectorAll(e))},t=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)},n=function(e,t){var n=e.split(".").join("");return t.classList?t.classList.contains(n):new RegExp("(^| )".concat(n,"( |$)"),"gi").test(t.className)},o=function(e,t){return t.classList?t.classList.add(e):"".concat(t.className," ").concat(e)},a=function(e,t){return n(e,t)?function(e,t){return t.classList?t.classList.remove(e):(t.className=t.className.replace(new RegExp("(^|\\b)".concat(e.split(" ").join("|"),"(\\b|$)"),"gi")," "),t)}(e,t):o(e,t)};function c(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var i="widget",s="MovieSeatBooking",l={container:".movie-seat-booking__container",seats:".movie-seat-booking__row .movie-seat-booking__seat:not(.movie-seat-booking__seat--occupied)",selectedSeats:".movie-seat-booking__row .movie-seat-booking__seat.movie-seat-booking__seat--selected",count:"#count",total:"#total",movieSelect:"#movie"},u={bookingSeat:"movie-seat-booking__seat",occupied:"movie-seat-booking__seat--occupied",selected:"movie-seat-booking__seat--selected"},d={selectedSeats:"selectedSeats",selectedMovieIndex:"selectedMovieIndex",selectedMoviePrice:"selectedMoviePrice"};document.querySelectorAll("[data-js-".concat(i,"=").concat(s,"]")).forEach((function(r){return function(r){var i={state:{},elements:{},data:{}},s=r,m=function(){i.elements.container.addEventListener("click",(function(e){n(u.bookingSeat,e.target)&&!n(u.occupied,e.target)&&(a(u.selected,e.target),v())})),i.elements.movieSelect.addEventListener("change",(function(e){i.data.ticketPrice=+e.target.value,g(e.target.selectedIndex,e.target.value),v()}))},v=function(){var t=e(l.selectedSeats,s),n=c(t).map((function(e){return c(i.elements.seats).indexOf(e)}));localStorage.setItem(d.selectedSeats,JSON.stringify(n));var o=t.length;i.elements.count.innerText=o,i.elements.total.innerText=o*i.data.ticketPrice},g=function(e,t){localStorage.setItem(d.selectedMovieIndex,e),localStorage.setItem(d.selectedMoviePrice,t)},f=function(){var e=JSON.parse(localStorage.getItem(d.selectedSeats));null!==e&&e.length>0&&i.elements.seats.forEach((function(t,n){e.indexOf(n)>-1&&o(u.selected,t)}));var t=localStorage.getItem(d.selectedMovieIndex);null!==t&&(i.elements.movieSelect.selectedIndex=t)};i.elements.container=t(l.container,s),i.elements.seats=e(l.seats,s),i.elements.count=t(l.count,s),i.elements.total=t(l.total,s),i.elements.movieSelect=t(l.movieSelect,s),i.data.ticketPrice=+i.elements.movieSelect.value,m(),v(),f()}(r)}))})();